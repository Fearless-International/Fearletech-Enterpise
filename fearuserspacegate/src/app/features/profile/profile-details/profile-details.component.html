<div class="profile-container">
  <h1 class="page-title">My Profile</h1>
  
  <div class="profile-content" *ngIf="!loading && user">
    <div class="profile-header-card">
      <div class="profile-header">
        <div class="profile-avatar">
          <p-avatar 
            *ngIf="!avatarUrl" 
            [label]="getInitials()" 
            styleClass="avatar-large"
            shape="circle"
          ></p-avatar>
          <p-avatar 
            *ngIf="avatarUrl" 
            [image]="avatarUrl" 
            styleClass="avatar-large"
            shape="circle"
          ></p-avatar>
        </div>
        <div class="profile-info">
          <h2>{{ user.fullName }}</h2>
          <p class="username">&#64;{{ user.username }}</p>
          <div class="contact-info">
            <div class="contact-item">
              <i class="pi pi-envelope"></i>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">
  {{ user.email }}
</span>
            </div>
            <div class="contact-item" *ngIf="user.phone">
              <i class="pi pi-phone"></i>
              <span>{{ user.phone }}</span>
            </div>
          </div>
        </div>
        <div class="profile-actions">
          <button pButton icon="pi pi-pencil" label="Edit Profile" (click)="goToEdit()" class="p-button-outlined"></button>
        </div>
      </div>
    </div>
    
    <p-tabView (onChange)="onTabChange($event)">
      <p-tabPanel header="Overview">
        <div class="overview-container">
          <div class="stats-cards">
            <p-card styleClass="stats-card">
              <div class="stats-content">
                <div class="stats-icon">
                  <i class="pi pi-calendar"></i>
                </div>
                <div class="stats-info">
                  <h3>Total Bookings</h3>
                  <h2>{{ userStats.totalBookings }}</h2>
                </div>
              </div>
            </p-card>
            
            <p-card styleClass="stats-card">
              <div class="stats-content">
                <div class="stats-icon">
                  <i class="pi pi-check-circle"></i>
                </div>
                <div class="stats-info">
                  <h3>Completed</h3>
                  <h2>{{ userStats.completedBookings }}</h2>
                </div>
              </div>
            </p-card>
            
            <p-card styleClass="stats-card">
              <div class="stats-content">
                <div class="stats-icon">
                  <i class="pi pi-clock"></i>
                </div>
                <div class="stats-info">
                  <h3>Pending</h3>
                  <h2>{{ userStats.pendingBookings }}</h2>
                </div>
              </div>
            </p-card>
            
            <p-card styleClass="stats-card">
              <div class="stats-content">
                <div class="stats-icon">
                  <i class="pi pi-envelope"></i>
                </div>
                <div class="stats-info">
                  <h3>Messages</h3>
                  <h2>{{ userStats.totalMessages }}</h2>
                  <span class="badge" *ngIf="userStats.unreadMessages > 0">{{ userStats.unreadMessages }} unread</span>
                </div>
              </div>
            </p-card>
          </div>
          
          <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="action-buttons">
              <button [style]="{
    width: '150px',
    'background-color': '#363737',
    'color': 'white',
  }" pButton icon="pi pi-calendar-plus" label="New Booking" routerLink="/bookings/new"></button>
              <button [style]="{
    width: '200px',
    'background-color': '#363737',
    'color': 'white',
  }" pButton icon="pi pi-envelope" label="View Messages" routerLink="/messages"></button>
              <button [style]="{
    width: '150px',
    'background-color': '#363737',
    'color': 'white',
  }"pButton icon="pi pi-sign-out" label="Logout" (click)="logout()" class="p-button-danger"></button>
            </div>
          </div>
        </div>
      </p-tabPanel>
      
      <p-tabPanel header="Account Information">
        <div class="account-details">
          <h3>Account Information</h3>
          
          <div class="detail-group">
            <div class="detail-item">
              <label>Username</label>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">{{ user.username }}</span>
            </div>
            <div class="detail-item">
              <label>Email</label>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">{{ user.email }}</span>
            </div>
            <div class="detail-item">
              <label>First Name</label>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">{{ user.firstName || 'Not provided' }}</span>
            </div>
            <div class="detail-item">
              <label>Last Name</label>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">{{ user.lastName || 'Not provided' }}</span>
            </div>
            <div class="detail-item">
              <label>Phone</label>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">{{ user.phone || 'Not provided' }}</span>
            </div>
            <div class="detail-item">
              <label>Account Created</label>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">{{ user.createdAt | date:'medium' }}</span>
            </div>
            <div class="detail-item">
              <label>Last Updated</label>
              <span style="font-size: 14px; color: #555; font-weight: 500; background-color: #f5f5f5; padding: 4px 8px; border-radius: 4px; border: 1px solid #ddd;">{{ user.updatedAt | date:'medium' }}</span>
            </div>
          </div>
          
          <div class="account-actions">
            <button pButton icon="pi pi-pencil" label="Edit Profile" (click)="goToEdit()" class="p-button-outlined"></button>
          </div>
        </div>
      </p-tabPanel>
    </p-tabView>
  </div>
  
  <div class="loading-container" *ngIf="loading">
    <p-progressSpinner styleClass="w-4rem h-4rem" strokeWidth="8" fill="#EEEEEE" animationDuration=".5s"></p-progressSpinner>
    <p>Loading profile...</p>
  </div>
</div>

<p-toast></p-toast>